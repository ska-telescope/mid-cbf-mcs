name: vcc
function: coarse-channelisation
domain: sensing
command: "Vcc"
instances: ["vcc"]
depends_on:
  - device: sys/database/2
livenessProbe:
{{ toYaml $.Values.livenessProbe | indent 2 }}
readinessProbe:
{{ toYaml $.Values.readinessProbe | indent 2 }}
image:
{{- with $.Values.midcbf.image}}
  registry: {{ .registry | quote}}
  image: {{ .image | quote}}
  tag: {{ .tag | quote}}
  pullPolicy: {{ .pullPolicy | quote}}
{{- end }}
server:
  name: "Vcc"
  instances:
  - name: "vcc"
    classes:
    - name: "Vcc"
      devices:
      {{- $num_vcc := (add1 $.Values.num_vcc | int) }}
      {{- range untilStep 1 $num_vcc 1 }}
      {{- $vcc_id := .}}
      - name: {{ printf "%s/%02d" $.Values.vcc_trl . }}
        properties:
          - name: "DeviceID"
            values:
            - {{ quote $vcc_id }}
          - name: "TalonLRUAddress"
            values:
            - "mid_csp_cbf/talon_lru/001" # TODO
          - name: "VccControllerAddress"
            values:
            - "talondx-001/vcc-app/vcc-controller" # TODO
          - name: "Band1And2Address"
            values:
            - "talondx-001/vcc-app/vcc-band-1-and-2" # TODO
          - name: "Band3Address"
            values:
            - "talondx-001/vcc-app/vcc-band-3" # TODO
          - name: "Band4Address"
            values:
            - "talondx-001/vcc-app/vcc-band-4" # TODO
          - name: "Band5Address"
            values:
            - "talondx-001/vcc-app/vcc-band-5" # TODO
          - name: "LRCTimeout"
            values:
            - {{ quote $.Values.vccTimeout }}
      {{- end }}
