# Default values for ska-mid-cbf HELM chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

enabled: true

system: csp
subsystem: cbfmcs-mid
telescope: SKA-mid

labels:
  app: ska-mid-cbf-mcs

global:
  minikube: false
  exposeDatabaseDS: true
  exposeAllDS: false
  tango_host: "databaseds-tango-base-test:10000"
  dsconfig:
    image:
      registry: artefact.skao.int
      image: ska-tango-images-tango-dsconfig
      tag: 1.5.12
      pullPolicy: IfNotPresent

signalVerificationVersion: 0.2.16
svImageRegistry: "artefact.skao.int"

livenessProbe:
  initialDelaySeconds: 0
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3
readinessProbe:
  initialDelaySeconds: 0
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3

midcbf:
  image:
    registry: artefact.skao.int
    image: ska-mid-cbf-mcs
    tag: 1.1.1
    pullPolicy: IfNotPresent

resources:
  limits:
    cpu: 200m
    memory: 256Mi
    ephemeral-storage: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi  
    ephemeral-storage: 256Mi

nodeSelector: {}

affinity: {}

tolerations: []

hostInfo:
  environment: "minikube"
  hostIP: "127.0.0.1"
  externalPort: 10001
  clusterDomain: cluster.local


################################################################################
######################### DEVICE SERVER CONFIGURATION ##########################
################################################################################

# Device Tango Resource Locator (TRL) defaults
# Indices added when templates are evaluated
controllerTrl: "mid_csp_cbf/sub_elt/controller" # TODO: "mid-cbf/control/0"
subarrayTrl: "mid_csp_cbf/sub_elt/subarray" # TODO: "mid-cbf/subarray/01"
vccTrl: "mid_csp_cbf/vcc" # TODO: "mid-cbf/mcs-vcc/01"
fspTrl: "mid_csp_cbf/fsp" # TODO: "mid-cbf/mcs-fsp/01"
fspCorrTrl: "mid_csp_cbf/fspCorrSubarray" # TODO: "mid-cbf/mcs-fsp-corr-subarray/01.01"
fspPstTrl: "mid_csp_cbf/fspPstSubarray" # TODO: "mid-cbf/mcs-fsp-pst-subarray/01.01"

# The amount of each resource type to deploy
numSubarray: 1
numVcc: 8
numVccPerPod: 6
numFsp: 4
numFspPerPod: 2

# Default timeout in seconds for a given device to apply to its internal proxies
controllerTimeout: 60
vccTimeout: 3
fspTimeout: 60
lruTimeout: 60
slimLinkTimeout: 10

# Device server configuration, generated from YAML files in data/ directory
deviceServers:
  mid-cbf-controller:
    enabled: true
    file: "data/cbfcontroller.yaml"

  mid-cbf-subarray:
    enabled: true
    file: "data/cbfsubarray.yaml"

  mid-cbf-vcc-multi:
    enabled: true
    file: "data/vcc.yaml"

  mid-cbf-fsp-multi:
    enabled: true
    file: "data/fsp.yaml"

  powerswitch:
    file: "data/powerswitch.yaml"

  talonlru:
    enabled: true
    file: "data/talonlru.yaml"

  talonboard:
    enabled: true
    file: "data/talonboard.yaml"

  slim:
    enabled: true
    file: "data/slim.yaml"

  slimlink:
    enabled: true
    file: "data/slimlink.yaml"

  talondxlogconsumer:
    enabled: true
    file: "data/talondxlogconsumer.yaml"
